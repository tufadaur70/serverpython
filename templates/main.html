<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<head>
   <title>Cronotermostato Tufa Versione 1</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
   <meta name="viewport" content = "width=device-width, initial-scale=1.0">
 
</head>

<body style="background: white">
   <h1 align="center"; style="color: navy"><u>Cronotermostato Web Tufa V1.0</u></h1>
   <br>
   <br>
   <h4 align="center"; id="temp" style="color: rgb(255, 2, 2)"> {{ temperature }} &deg;C</h4>
   <h4 align="center"; style="color: rgb(0, 119, 255)"> {{ humidity }} RH</h4>
   <br>

<div align="center">
  <div class="column">
   <h3 style="color: blue">Device 1
      <button style="color: rgb(0, 255, 0)" onclick="accendiCaldaia()" ACCENDI></button>
      <button style="color: rgb(255, 0, 0)" onclick="spegniCaldaia()" SPEGNI></button>
   </h3>
</div>
</body>
<script scr="https://code.jquery.com/jquery-3.6.0.js"></script>
<script>
   function accendiCaldaia() {
      $.ajax({
         type:"POST",
         url: "{{ url_for('caldaia')}}",
         data: {"stato" : "ON"}
      })
   }

   function spegniCaldaia() {

      $.ajax({
         type:"POST",
         url: "{{ url_for('caldaia')}}",
         data: {"stato" : "OFF"}
      })

   }

   function leggiTemperatura() {

      $.ajax({
         type:"POST",
         url: "{{ url_for('temperatura')}}",
         success : function(response){
            document.getElementById("temp").innerHTML ="PEPPE" + response.temperature ;
         }
         
      })

   }
   setInterval(leggiTemperatura, 10*1000);
</script>


</html>
